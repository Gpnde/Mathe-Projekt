<!DOCTYPE html>
<html lang="de">
<head>
    <style>
        /* Navbar styles */
        .navbar {
            background-color: black;
            color: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            width: 100%;
            height: 70px;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        form {
            display: flex;
            flex-direction: column;
            height: calc(100vh - 140px);
        }

        .form-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        label {
            margin-bottom: 5px;
        }

        textarea, input {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            flex: 1;
            margin-right: 10px;
        }

        textarea {
            resize: none;
        }

        .form-row textarea:last-child, .form-row input:last-child {
            margin-right: 0;
        }

        button {
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        .loesungsweg, .treibstoff {
            margin-top: 20px;
            flex-grow: 1;
        }

        .loesungsweg textarea, .treibstoff textarea {
            width: 100%;
            height: 200px;
        }

        .feedback {
            margin-top: 20px;
            font-weight: bold;
            color: red;
        }

        .success {
            color: green;
            font-size: 24px;
            margin-top: 20px;
            display: none; /* Initially hidden */
        }

        .mini-keyboard {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .mini-keyboard button {
            font-size: 24px;
            margin: 5px;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #333;
            background-color: #f0f0f0;
            cursor: pointer;
            color: black;
            font-weight: bold;
        }

        .mini-keyboard button:hover {
            background-color: #ddd;
        }

        .submit-button {
            width: 100px;
            height: 60px;
            font-size: 14px;
            text-align: center;
            padding: 5px;
        }

        .error {
            border: 1px solid rgba(255, 0, 0, 0.5);
            background-color: rgba(255, 0, 0, 0.1);
        }

        .success-input {
            border: 1px solid rgba(0, 128, 0, 0.5);
            background-color: rgba(0, 128, 0, 0.1);
        }

        .highlight-error {
            color: red;
            font-weight: bold;
        }
    </style>
    <meta charset="UTF-8">
    <title>Mein Dokument</title>
</head>
<body>
    <div class="navbar">
        <h1>Mathe Flug</h1>
    </div>
    <br>
    <br>
    <div class="text">
        Da der Treibstoff nicht ausreicht, um direkt zum Berg (B) zu fliegen, möchte das Flugzeug zunächst zur Tankstelle (C) fliegen, um aufzutanken, und dann weiter zum Berg (B) zu fliegen. <br>
        Berechne, wie viel Treibstoff mindestens nachgetankt werden muss, damit das Flugzeug mit dem restlichen Treibstoff und dem zusätzlichen Sprit sowohl zum Berg (B) <br>
        als auch anschließend sicher zurück zur Insel (A) fliegen kann.
        <br>
        <br>
        Skizze: <br>
        <img src="https://github.com/Gpnde/Mathe-Projekt/blob/main/Screenshot%202024-10-12%20213307.png?raw=true" alt="Mein Screenshot" />
        <br>
        <br>
    <form id="mathForm">
        <div class="form-row">
            <div>
                <label for="gegeben">Gegeben:</label>
                <textarea id="gegeben" name="gegeben" rows="3" placeholder="Bitte Gegebenes eingeben..."></textarea>
            </div>
            <div>
                <label for="gesucht">Gesucht:</label>
                <textarea id="gesucht" name="gesucht" rows="3" placeholder="Bitte Gesuchtes eingeben..."></textarea>
            </div>
        </div>

        <!-- Zähler und Nenner untereinander in der Mitte -->
        <div style="display: flex; flex-direction: column; align-items: center;">
            <div>
                <label for="zaehler">Zähler (Bruch):</label>
                <input id="zaehler" type="text" placeholder="Zähler" onfocus="setActiveField(this)" />
            </div>
            <div>
                <label for="nenner">Nenner (Bruch):</label>
                <input id="nenner" type="text" placeholder="Nenner" onfocus="setActiveField(this)" />
            </div>
        </div>

        <!-- Mini-Tastatur -->
        <div class="mini-keyboard">
            <button type="button" onclick="insertCharacter('γ')">γ</button>
            <button type="button" onclick="insertCharacter('α')">α</button>
            <button type="button" onclick="insertCharacter('β')">β</button>
            <button type="button" onclick="insertFraction()">Bruch einsetzen</button>
            <button type="button" onclick="insertCharacter('²')">x²</button>
            <button type="button" onclick="insertCharacter('³')">x³</button>
            <button type="button" onclick="insertCharacter('√')">√</button> <!-- Wurzel-Button -->
        </div>

        <div class="loesungsweg">
            <label for="loesungsweg">Lösungsweg:</label>
            <textarea id="loesungsweg" name="loesungsweg" placeholder="Hier Lösungsweg eingeben..." onfocus="setActiveField(this)"></textarea>
        </div>

        <!-- Gesamt benötigter Treibstoff -->
        <div class="treibstoff">
            <label for="treibstoff">Insgesamt benötigter Treibstoff:</label>
            <textarea id="treibstoff" name="treibstoff" placeholder="Hier Treibstoff eingeben..." onfocus="setActiveField(this)"></textarea>
        </div>

        <div class="feedback" id="feedback"></div>
        <div class="success" id="successMessage">Richtig!</div> <!-- Erfolgsnachricht -->

        <button type="submit" class="submit-button">Überprüfen</button>
    </form>

    <script>
        let currentField = null;

        function setActiveField(field) {
            currentField = field;
            field.classList.remove('error'); // Fehler-Highlight entfernen, wenn das Feld fokussiert wird
        }

        function insertCharacter(character) {
            if (currentField) {
                currentField.value += character;
                currentField.focus(); // Setzt den Fokus zurück auf das aktuelle Feld
            }
        }

        function insertFraction() {
            if (currentField) {
                currentField.value += 'a/b'; // Platzhalter für Bruch
                currentField.focus(); // Setzt den Fokus zurück auf das aktuelle Feld
            }
        }

        function highlightErrors(userInput, correctAnswer) {
            let highlighted = '';
            let maxLength = Math.max(userInput.length, correctAnswer.length);
            for (let i = 0; i < maxLength; i++) {
                const userChar = userInput[i] || '';
                const correctChar = correctAnswer[i] || '';
                if (userChar === correctChar) {
                    highlighted += userChar; // Kein Fehler, normaler Buchstabe
                } else {
                    highlighted += `<span class="highlight-error">${userChar}</span>`; // Fehlerhafter Buchstabe
                }
            }
            return highlighted;
        }

        document.getElementById("mathForm").onsubmit = function(event) {
            event.preventDefault(); // Verhindert das normale Absenden des Formulars
            
            const gegeben = document.getElementById("gegeben");
            const gesucht = document.getElementById("gesucht");
            const loesungsweg = document.getElementById("loesungsweg");
            const zaehler = document.getElementById("zaehler");
            const nenner = document.getElementById("nenner");
            const feedback = document.getElementById("feedback");
            const successMessage = document.getElementById("successMessage");

            let hasError = false;

            // Validierung
            if (gegeben.value.trim() === "") {
                gegeben.classList.add('error');
                hasError = true;
            } else {
                gegeben.classList.remove('error');
            }

            if (gesucht.value.trim() === "") {
                gesucht.classList.add('error');
                hasError = true;
            } else {
                gesucht.classList.remove('error');
            }

            if (loesungsweg.value.trim() === "") {
                loesungsweg.classList.add('error');
                hasError = true;
            } else {
                loesungsweg.classList.remove('error');
            }

            if (zaehler.value.trim() === "") {
                zaehler.classList.add('error');
                hasError = true;
            } else {
                zaehler.classList.remove('error');
            }

            if (nenner.value.trim() === "") {
                nenner.classList.add('error');
                hasError = true;
            } else {
                nenner.classList.remove('error');
            }

            // Ergebnisse anzeigen
            if (hasError) {
                feedback.innerHTML = "Bitte alle erforderlichen Felder ausfüllen.";
                successMessage.style.display = "none"; // Erfolgsnachricht ausblenden
            } else {
                // Überprüfung der Lösungen
                const correctZähler = "300"; // Korrekte Lösung für den Zähler
                const correctNenner = "200"; // Korrekte Lösung für den Nenner
                const correctTreibstoff = "1100L"; // Korrekte Lösung für den benötigten Treibstoff

                const isZählerCorrect = zaehler.value.trim() === correctZähler;
                const isNennerCorrect = nenner.value.trim() === correctNenner;
                const isTreibstoffCorrect = document.getElementById("treibstoff").value.trim() === correctTreibstoff;

                if (isZählerCorrect && isNennerCorrect && isTreibstoffCorrect) {
                    feedback.innerText = ""; // Fehlernachricht leeren
                    successMessage.style.display = "block"; // Erfolgsnachricht anzeigen
                } else {
                    feedback.innerHTML = "Leider falsch! Bitte überprüfe deine Antworten.<br>" +
                                        "Zähler: " + highlightErrors(zaehler.value.trim(), correctZähler) + "<br>" +
                                        "Nenner: " + highlightErrors(nenner.value.trim(), correctNenner) + "<br>" +
                                        "Treibstoff: " + highlightErrors(document.getElementById("treibstoff").value.trim(), correctTreibstoff);
                    successMessage.style.display = "none"; // Erfolgsnachricht ausblenden
                }
            }
        }
    </script>
</body>
</html>
